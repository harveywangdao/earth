1.Golang
切片
map
管道
select
协程 调度 GMP
内存回收 三色标记 白 灰 黑
内存管理 mheap mspan mcentral mcache mstats TCMalloc
接口interface
反射
定时器


2.MySQL
聚族索引和非聚族索引
覆盖索引
InnoDB和MyISAM
索引B树和B+树
B树的所有节点既存放键(key)也存放数据(data),而B+树只有叶子节点存放key和data,其他内节点只存放key
B+树的叶子节点有一条引用链指向与它相邻的叶子节点

执行流程
mvcc 快照读 当前读 Read View
隔离级别 读取未提交 读取已提交 可重复读 可串行化

InnoDB 通过数据行的 DB_TRX_ID 和 Read View 来判断数据的可见性
DB_TRX_ID（6字节）：表示最后一次插入或更新该行的事务 id
DB_ROLL_PTR（7字节） 回滚指针，指向该行的 undo log
DB_ROW_ID（6字节）：如果没有设置主键且该表没有唯一非空索引时，InnoDB 会使用该 id 来生成聚簇索引

redo log
undo log
binlog

Record lock
Gap lock
Next-key lock

select ... lock in share mode  S锁
select ... for update X锁

ACID 原子性 一致性 隔离性 持久性

脏读
幻读
不可重复读

回表

连接器 查询缓存、分析器、优化器、执行器

Buffer Pool
redo log buffer


3.DB
MongoDB
LevelDB
ElasticSearch


4.Redis
string SDS 长度不能超过512M int编码 raw编码 embstr编码
hash hashtable ziplist(列表保存元素个数小于512个&每个元素长度小于64字节)
list linkedlist ziplist(列表保存元素个数小于512个&每个元素长度小于64字节)
set hashtable intset(集合对象中所有元素都是整数&集合对象所有元素数量不超过512)
zset skiplist&字典 ziplist(保存的元素数量小于128&每个元素长度小于64字节)

AOF
RDB 快照 save&bgsave dump.rdb
RDB在恢复大数据集时的速度比AOF的恢复速度要快

HyperLogLog
PUB/SUB
事务 MULTI EXEC DISCARD UNWATCH WATCH
Lua EVAL "return {KEYS[1],KEYS[2],ARGV[1],ARGV[2]}" 2 key1 key2 first second
Redis GEO
Redis Stream
Redis Pipeline
Redis Bitmap

redis缓存击穿(热点key不失效或加锁)、缓存穿透(不存在的key设置空value和过期时间)、缓存雪崩(key失效时间不同)

单节点
主从 replicaof 127.0.0.1 7000
redis cluster
redis cluster+主从
主从+哨兵

daemonize yes
bind 127.0.0.1
port 7000
dir /home/thomas/server/redis/data/redis-7000
pidfile /var/run/redis/redis-7000.pid
logfile /home/thomas/server/redis/log/redis-7000.log
cluster-enabled yes
cluster-config-file /home/thomas/server/redis/conf/cluster-7000.conf
cluster-node-timeout 10000

rm -rf cluster data log
mkdir cluster data log
mkdir data/redis-7000 data/redis-7001 data/redis-7002 data/redis-8000 data/redis-8001 data/redis-8002 data/sentinel-9000 data/sentinel-9001 data/sentinel-9002

./redis-server /home/thomas/server/redis/conf/redis-7000.conf
./redis-cli -p 7000
./redis-cli --cluster create 127.0.0.1:7000 127.0.0.1:7001 127.0.0.1:7002
./redis-cli -c -p 7000
./redis-cli --cluster check 127.0.0.1:7000
./redis-cli --cluster reshard 127.0.0.1:7000
./redis-cli -p 7000 cluster nodes
./redis-cli --cluster add-node 127.0.0.1:7003 127.0.0.1:7000
./redis-cli --cluster add-node 127.0.0.1:8000 127.0.0.1:7000 --cluster-slave
./redis-cli --cluster add-node 127.0.0.1:8001 127.0.0.1:7000 --cluster-slave --cluster-master-id 7f3541c3b2e8bd05226729e9889a338b341cd77e
./redis-cli --cluster del-node 127.0.0.1:7000 3adfaaeb6d60f39e70562d961fe7fae200913386

port 9000
daemonize yes
logfile /home/thomas/server/redis/log/sentinel-9000.log
pidfile /var/run/redis/sentinel-9000.pid
dir /home/thomas/server/redis/data/sentinel-9000

sentinel monitor mymaster 127.0.0.1 7000 2
sentinel down-after-milliseconds mymaster 1500
sentinel failover-timeout mymaster 30000

./redis-sentinel /home/thomas/server/redis/conf/sentinel-9000.conf
./redis-cli -p 9000
sentinel master mymaster

读操作:
读到缓存直接返回
读不到缓存,先去DB读数据,再更新到缓存,再返回

写操作:
先写DB,删除缓存

问题:
A读了数据库还未更新缓存
B修改数据库
A再去更新缓存
数据不一致

解决办法加短的过期时间


5.Kubernetes
Pod Deployment Service DaemonSet StatefulSet ReplicaSet Job Label Namespace ConfigMap Secret Ingress
Volume PersistentVolume PersistentVolumeClaim StorageClass
kube-apiserver etcd kube-scheduler kube-controller-manager kubelet kube-proxy


6.微服务/服务网格
服务注册发现
链路追踪


7.MQ
Kafka
RabbitMQ
RocketMQ
ActiveMQ
Pulsar

8.操作系统
进程
线程 TCB
内存
进程间通信 管道 命名管道FIFO 共享内存 消息队列 信号 UNIX域 socket DBUS
同步 信号量 互斥量 条件变量 读写锁
IO多路复用 poll select epoll


9.网络/TCP/IP/UDP
物理层
数据链路层 ARP RARP
网络层 IP ICMP IGMP
传输层 TCP UDP
应用层 HTTP FTP TFTP SMTP

三次握手 避免重复连接
四次挥手
粘包
DDOS
半连接队列
全连接队列

最大传输单元(MTU) 1500字节
MSS （最大报文段长度）536

SYN Flood
Syn Cache: 不直接分配TCB,使用更少的数据记录状态
Syn Cookie: 无状态的三次握手
cookie源认证: 记录sequence number,将真实客户端IP加入白名单
reset认证: reset报文,将真实客户端IP加入白名单

慢启动 慢启动门限(ssthresh) 65536 指数增长
拥塞避免 线性增长 重传了一个报文段 ssthresh=cwnd/2 cwnd=1 进入慢启动
快速重传 收到3个相同的ACK ssthresh=cwnd/2 cwnd=ssthresh 进入拥塞避免
快速恢复
窗口值的大小就代表能够发送出去的但还没有收到ACK的最大数据报文段
拥塞窗口(cwnd)
接收窗口(rwnd)


10.HTTP HTTP2 TLS/SSL
状态码:
200 请求成功
301 资源（网页等）被永久转移到其它URL

1xx 信息响应
2xx 成功响应
3xx 重定向
4xx 客户端错误
5xx 服务器错误

301 MovedPermanently 永久移动
302 Found 临时移动,与301类似,但资源只是临时被移动,客户端应继续使用原有URI

400 Bad Request
401 Unauthorized
403 Forbidden
404 请求的资源（网页等）不存在

500 InternalServerError
501 NotImplemented
502 BadGateway
503 ServiceUnavailable
504 GatewayTimeout
505 HTTPVersionNotSupported

包含请求方法、URI、HTTP版本信息
header
body

包含HTTP版本、状态码、状态码的原因短语
header
body

HTTP 2.0 和 HTTP1.1 区别
多路复用 二进制分帧层
首部压缩
HTTP2支持服务器推送

跨域CORS 同源策略 JSONP
CSRF/XSRF XSS
JWT Session Token


11.算法


12.分布式 高并发 事务 Snowflake

